# Design: Beta Launch with Landing Page

> **Estado:** üü° En revisi√≥n
> **Fecha:** 2025-10-20
> **Autor:** Claude Code

---

## 1. Decisiones de Arquitectura

### 1.1 Landing Page: Separada vs Integrada

#### RECOMENDACI√ìN: Landing Separada

#### Arquitectura Propuesta

```text
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      LANDING PAGE                           ‚îÇ
‚îÇ  Dominio: www.anclora.com (o anclora.com)                 ‚îÇ
‚îÇ  Stack: Next.js standalone @ apps/landing/                 ‚îÇ
‚îÇ  Deploy: Vercel (gratis, CDN global, edge functions)       ‚îÇ
‚îÇ  Prop√≥sito: Marketing, conversi√≥n, SEO                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
                             ‚îÇ CTA ‚Üí "Solicitar Acceso"
                             ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    WAITLIST API                             ‚îÇ
‚îÇ  Endpoint: POST app.anclora.com/api/waitlist               ‚îÇ
‚îÇ  Backend: FastAPI                                           ‚îÇ
‚îÇ  Database: PostgreSQL (tabla waitlist)                     ‚îÇ
‚îÇ  Email: Hostinger SMTP (noreply@anclora.com)              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
                             ‚îÇ Invitaci√≥n email con credenciales
                             ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    APLICACI√ìN BETA                          ‚îÇ
‚îÇ  Dominio: app.anclora.com                                  ‚îÇ
‚îÇ  Stack: Next.js @ apps/web/ + FastAPI @ apps/api/          ‚îÇ
‚îÇ  Deploy: Railway/Fly.io/AWS                                 ‚îÇ
‚îÇ  Prop√≥sito: Producto funcional, usuarios registrados       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

CONFIGURACI√ìN DNS (anclora.com en Hostinger):
‚îú‚îÄ‚îÄ A/AAAA record @ ‚Üí Vercel IP (landing)
‚îú‚îÄ‚îÄ CNAME www ‚Üí cname.vercel-dns.com (landing)
‚îî‚îÄ‚îÄ CNAME app ‚Üí [railway/fly.io endpoint] (aplicaci√≥n beta)
```text

#### Ventajas de Separaci√≥n

1. **Marketing √Ågil:** Iterar copy y dise√±o sin tocar c√≥digo de producto
2. **Performance:** Landing est√°tica optimizada para conversi√≥n, CDN global
3. **SEO:** Mejor indexaci√≥n, meta tags espec√≠ficos para marketing
4. **A/B Testing:** Experimentos sin afectar app
5. **Escalabilidad:** Independencia de deploys, rollbacks sin impacto cruzado
6. **Costes:** Landing gratis en Vercel, app paga solo lo necesario

#### Desventajas (Mitigadas)

- Gesti√≥n de 2 repos/deploys ‚Üí **Mitigaci√≥n:** Monorepo, scripts de deploy unificados
- Consistencia de branding ‚Üí **Mitigaci√≥n:** Design tokens compartidos

---

### 1.2 Stack T√©cnico Landing Page

```typescript
// apps/landing/
{
  "framework": "Next.js 15.0",
  "rendering": "Static Site Generation (SSG)",
  "styling": "Tailwind CSS 3.4",
  "animations": "Framer Motion",
  "forms": "React Hook Form + Zod",
  "analytics": "Google Analytics 4 + Vercel Analytics",
  "seo": "next-seo",
  "deployment": "Vercel (free tier)"
}
```text

#### Estructura de Directorio

```text
apps/landing/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx           # Root layout, GA4, fonts
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx             # Homepage (landing principal)
‚îÇ   ‚îú‚îÄ‚îÄ thank-you/page.tsx   # Post-signup confirmation
‚îÇ   ‚îî‚îÄ‚îÄ privacy/page.tsx     # Pol√≠tica de privacidad
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ Hero.tsx             # Above the fold, CTA primario
‚îÇ   ‚îú‚îÄ‚îÄ ProblemSolution.tsx  # Pain points ‚Üí Soluci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ Features.tsx         # Caracter√≠sticas con capturas
‚îÇ   ‚îú‚îÄ‚îÄ UseCases.tsx         # Casos de uso (grid)
‚îÇ   ‚îú‚îÄ‚îÄ FAQ.tsx              # Accordion de preguntas
‚îÇ   ‚îú‚îÄ‚îÄ EmailCapture.tsx     # Formulario de email
‚îÇ   ‚îî‚îÄ‚îÄ ui/                  # Componentes reutilizables (Button, Input)
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ api.ts               # Cliente HTTP para /api/waitlist
‚îÇ   ‚îú‚îÄ‚îÄ analytics.ts         # GA4 event tracking
‚îÇ   ‚îî‚îÄ‚îÄ design-tokens.ts     # Colores, tipograf√≠as, espaciados
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îú‚îÄ‚îÄ videos/demo.mp4      # Video demo
‚îÇ   ‚îú‚îÄ‚îÄ images/              # Screenshots, iconos
‚îÇ   ‚îî‚îÄ‚îÄ favicon.ico
‚îî‚îÄ‚îÄ content/
    ‚îî‚îÄ‚îÄ copy.ts              # Todo el texto centralizado
```text

---

### 1.3 Email Service: SMTP Hostinger (Existente)

#### DECISI√ìN FINAL: Usar SMTP de Hostinger

El proyecto ya tiene servicio de email contratado en Hostinger con el dominio `anclora.com`.

**Email accounts disponibles:**
- `antonio@anclora.com` (principal)
- `hola@anclora.com` (alias existente)
- Capacidad de crear m√°s aliases: `soporte@anclora.com`, `noreply@anclora.com`, etc.

**Ventajas:**
- ‚úÖ Ya est√° pagado (coste $0 adicional)
- ‚úÖ Dominio propio profesional (@anclora.com)
- ‚úÖ Mayor deliverability (dominio establecido)
- ‚úÖ Control total sobre la infraestructura
- ‚úÖ Sin l√≠mites de servicios externos

**Configuraci√≥n SMTP (Hostinger):**
```python
SMTP_HOST = "smtp.hostinger.com"
SMTP_PORT = 465  # SSL
SMTP_USER = "noreply@anclora.com"  # Crear este alias
SMTP_PASSWORD = os.getenv("SMTP_PASSWORD")
```

#### Integraci√≥n con Python

#### Opci√≥n A: smtplib (est√°ndar)

```python
# apps/api/clients/email_client.py
import smtplib
from email.mime.text import MIMEText
from email.mime.multipart import MIMEMultipart
from typing import Optional
import os

class EmailClient:
    def __init__(self):
        self.smtp_host = "smtp.hostinger.com"
        self.smtp_port = 465
        self.smtp_user = "noreply@anclora.com"
        self.smtp_password = os.getenv("SMTP_PASSWORD")

    async def send_email(
        self,
        to: str,
        subject: str,
        html: str,
        from_email: str = "noreply@anclora.com",
        from_name: str = "Anclora"
    ) -> bool:
        """Send email via Hostinger SMTP."""
        try:
            message = MIMEMultipart("alternative")
            message["Subject"] = subject
            message["From"] = f"{from_name} <{from_email}>"
            message["To"] = to

            html_part = MIMEText(html, "html")
            message.attach(html_part)

            with smtplib.SMTP_SSL(self.smtp_host, self.smtp_port) as server:
                server.login(self.smtp_user, self.smtp_password)
                server.sendmail(from_email, to, message.as_string())

            return True
        except Exception as e:
            logger.error(f"Failed to send email: {e}")
            return False
```

#### Opci√≥n B: FastAPI-Mail (recomendado para async)

```python
# apps/api/clients/email_client.py
from fastapi_mail import FastMail, MessageSchema, ConnectionConfig
from pydantic import EmailStr
import os

conf = ConnectionConfig(
    MAIL_USERNAME="noreply@anclora.com",
    MAIL_PASSWORD=os.getenv("SMTP_PASSWORD"),
    MAIL_FROM="noreply@anclora.com",
    MAIL_PORT=465,
    MAIL_SERVER="smtp.hostinger.com",
    MAIL_STARTTLS=False,
    MAIL_SSL_TLS=True,
    USE_CREDENTIALS=True,
    VALIDATE_CERTS=True
)

fm = FastMail(conf)

async def send_email(
    to: EmailStr,
    subject: str,
    html: str,
    from_name: str = "Anclora"
) -> bool:
    """Send email via Hostinger SMTP."""
    try:
        message = MessageSchema(
            subject=subject,
            recipients=[to],
            body=html,
            subtype="html"
        )
        await fm.send_message(message)
        return True
    except Exception as e:
        logger.error(f"Failed to send email: {e}")
        return False
```

#### Aliases de Email Recomendados

Crear estos aliases en Hostinger para la beta:

1. **`noreply@anclora.com`** - Emails autom√°ticos (confirmaciones, notificaciones)
2. **`soporte@anclora.com`** - Respuestas de usuarios, tickets
3. **`beta@anclora.com`** - Invitaciones beta (opcional)

**Configuraci√≥n en .env:**

```bash
SMTP_HOST=smtp.hostinger.com
SMTP_PORT=465
SMTP_USER=noreply@anclora.com
SMTP_PASSWORD=tu_password_seguro_aqui
SMTP_FROM=noreply@anclora.com
SMTP_FROM_NAME=Anclora
```

#### Dependencias Python

```bash
# Opci√≥n A (est√°ndar, ya incluido en Python)
# No requiere instalaci√≥n adicional

# Opci√≥n B (recomendado)
pip install fastapi-mail
```text

---

### 1.4 Autenticaci√≥n: JWT con Refresh Tokens (Opcional)

#### Decisi√≥n de Implementaci√≥n

##### Fase Beta: Solo Access Tokens (24h TTL)

Raz√≥n: Simplicidad, menor complejidad para beta con usuarios limitados.

##### Fase Post-Beta: Refresh Tokens

Implementar cuando se escale a >100 usuarios activos.

#### Schema JWT

```python
# Access Token Payload
{
  "sub": "user_id",          # Subject (user ID)
  "email": "user@example.com",
  "role": "beta_user",       # Roles: admin, beta_user, pro_user
  "exp": 1672531200,         # Expiration (24h desde emisi√≥n)
  "iat": 1672444800,         # Issued at
  "jti": "unique_token_id"   # Token ID (para revocaci√≥n si necesario)
}
```text

#### Endpoints de Autenticaci√≥n
```text

POST /auth/register
  Request:  { email, password }
  Response: { user: {...}, access_token }

POST /auth/login
  Request:  { email, password }
  Response: { access_token, token_type: "bearer", user: {...} }

POST /auth/forgot-password
  Request:  { email }
  Response: { message: "Reset link sent" }

POST /auth/reset-password
  Request:  { token, new_password }
  Response: { message: "Password reset successful" }

GET /auth/me (requiere auth)
  Response: { user: {...} }
```text

---

## 2. Dise√±o de Base de Datos

### 2.1 Nueva Tabla: `waitlist`

```sql
CREATE TABLE waitlist (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email VARCHAR(255) UNIQUE NOT NULL,
  referral_source VARCHAR(100),     -- 'linkedin', 'twitter', 'direct', etc.
  created_at TIMESTAMP DEFAULT NOW(),
  invited BOOLEAN DEFAULT FALSE,
  invited_at TIMESTAMP,

  CONSTRAINT email_format CHECK (email ~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}$')
);

CREATE INDEX idx_waitlist_email ON waitlist(email);
CREATE INDEX idx_waitlist_created_at ON waitlist(created_at DESC);
CREATE INDEX idx_waitlist_invited ON waitlist(invited) WHERE invited = FALSE;
```text

### 2.2 Modificaci√≥n Tabla: `users`

```sql
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email VARCHAR(255) UNIQUE NOT NULL,
  hashed_password VARCHAR(255) NOT NULL,
  role VARCHAR(50) DEFAULT 'beta_user',  -- 'admin', 'beta_user', 'pro_user'
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),

  -- L√≠mites beta
  max_documents INT DEFAULT 50,
  max_queries_per_hour INT DEFAULT 50,

  -- Onboarding
  onboarding_completed BOOLEAN DEFAULT FALSE,
  onboarding_completed_at TIMESTAMP,

  CONSTRAINT email_format CHECK (email ~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}$')
);

CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_role ON users(role);
```text

### 2.3 Nueva Tabla: `analytics_events`

```sql
CREATE TABLE analytics_events (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  event_type VARCHAR(100) NOT NULL,  -- 'document_uploaded', 'query_performed', 'error_occurred'
  metadata JSONB,                     -- Datos adicionales (filename, query, error_code)
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_analytics_user_id ON analytics_events(user_id);
CREATE INDEX idx_analytics_event_type ON analytics_events(event_type);
CREATE INDEX idx_analytics_created_at ON analytics_events(created_at DESC);

-- Ejemplo de consulta para m√©tricas
-- Total queries hoy por usuario
SELECT user_id, COUNT(*) as query_count
FROM analytics_events
WHERE event_type = 'query_performed'
  AND created_at >= CURRENT_DATE
GROUP BY user_id
ORDER BY query_count DESC;
```text

---

## 3. API Contracts

### 3.1 Waitlist Endpoint

```typescript
// POST /api/waitlist
interface WaitlistRequest {
  email: string;              // Required, validated
  referral_source?: string;   // Optional, tracked
}

interface WaitlistResponse {
  success: true;
  message: string;            // "Added to waitlist"
  position?: number;          // Position in queue (optional)
}

interface WaitlistError {
  success: false;
  error: string;              // "Invalid email" | "Email already registered"
  code: string;               // "INVALID_EMAIL" | "DUPLICATE_EMAIL" | "RATE_LIMIT_EXCEEDED"
}

// Rate Limiting
// Header: X-RateLimit-Limit: 5
// Header: X-RateLimit-Remaining: 4
// Header: X-RateLimit-Reset: 1672531200 (Unix timestamp)
```text

### 3.2 Auth Endpoints

```typescript
// POST /auth/register
interface RegisterRequest {
  email: string;
  password: string;  // Min 8 chars, validado frontend y backend
}

interface RegisterResponse {
  user: {
    id: string;
    email: string;
    role: string;
    created_at: string;
  };
  access_token: string;
}

// POST /auth/login
interface LoginRequest {
  email: string;
  password: string;
}

interface LoginResponse {
  access_token: string;
  token_type: "bearer";
  user: {
    id: string;
    email: string;
    role: string;
  };
}

// Error Responses (ambos endpoints)
interface AuthError {
  detail: string;  // "Invalid credentials" | "User already exists"
  code: string;    // "INVALID_CREDENTIALS" | "USER_EXISTS"
}
```text

### 3.3 Ingestion Status Endpoint (Async)

```typescript
// GET /ingest/status/{job_id}
interface IngestionStatusResponse {
  job_id: string;
  status: "pending" | "processing" | "completed" | "failed";
  progress: number;              // 0-100
  message?: string;              // Human-readable status
  document_id?: string;          // Si completed
  error?: string;                // Si failed
  created_at: string;
  updated_at: string;
}
```text

---

## 4. Frontend: Landing Page Design

### 4.0 Estrategia de Messaging (Basado en An√°lisis de Mercado 2025)

**Posicionamiento clave:**
- Mercado RAG: $1.2-3.8B (2025) ‚Üí $165B (2034) - momento ideal para lanzar
- **vs NotebookLM:** Resuelve su problema #1 (citas incorrectas) + sin l√≠mite 500k palabras
- **vs RAG tradicionales:** Listo en 5 minutos, sin necesidad de ser MLops engineer

**Diferenciadores REALES del MVP (enfatizar):**
‚úÖ Citas verificables (similarity scores + metadata: filename, page, score)
‚úÖ Multilenguaje ES/EN nativo
‚úÖ Sin l√≠mites artificiales de palabras
‚úÖ Privacidad total (self-hostable, no depende de Google)
‚úÖ F√°cil de usar (drag & drop)

**Features NO prometer (roadmap futuro):**
‚ùå Colaboraci√≥n tiempo real (v1.1)
‚ùå Procesamiento im√°genes/tablas (v1.2)
‚ùå 20+ integraciones (v1.3)
‚ùå Graph RAG (v2.0)

**Estrategia:** Honestidad + roadmap claro = confianza de early adopters

### 4.1 Hero Section (Above the Fold)
```text

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  NAVBAR: [Logo] ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ [Demo] [Iniciar Sesi√≥n]‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                               ‚îÇ
‚îÇ  [Lado Izquierdo: 50%]                                       ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  Headline (H1, 48px, bold):                                  ‚îÇ
‚îÇ  "Deja de buscar entre miles de documentos."                ‚îÇ
‚îÇ  "Preg√∫ntale directamente a tu conocimiento empresarial."   ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  Subheadline (H2, 24px, regular):                           ‚îÇ
‚îÇ  "Anclora transforma tus PDFs y documentos en un asistente  ‚îÇ
‚îÇ   inteligente que responde al instante, con fuentes         ‚îÇ
‚îÇ   verificadas y sin alucinaciones."                          ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  Diferenciador vs NotebookLM (badge/small, destacado):      ‚îÇ
‚îÇ  "üí° A diferencia de NotebookLM que da citas incorrectas,   ‚îÇ
‚îÇ   Anclora garantiza cada respuesta con fuentes verificables."‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  [Formulario Email]                                          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ  ‚îÇ tu@empresa.com      ‚îÇ ‚îÇ Solicitar    ‚îÇ                   ‚îÇ
‚îÇ  ‚îÇ                     ‚îÇ ‚îÇ Acceso Beta  ‚îÇ                   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  "‚úÖ Gratis durante beta ¬∑ Sin tarjeta ¬∑ Acceso prioritario"‚îÇ
‚îÇ  "üî• √önete a los primeros 100 usuarios"                     ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  [Lado Derecho: 50%]                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                           ‚îÇ
‚îÇ  ‚îÇ                               ‚îÇ                           ‚îÇ
‚îÇ  ‚îÇ     [VIDEO DEMO / GIF]        ‚îÇ                           ‚îÇ
‚îÇ  ‚îÇ   90 seg: Upload ‚Üí Query      ‚îÇ                           ‚îÇ
‚îÇ  ‚îÇ     ‚Üí Answer con citas        ‚îÇ                           ‚îÇ
‚îÇ  ‚îÇ   MOSTRAR: similarity scores  ‚îÇ                           ‚îÇ
‚îÇ  ‚îÇ                               ‚îÇ                           ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                           ‚îÇ
‚îÇ                                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```text

### 4.2 Secci√≥n: Problema ‚Üí Soluci√≥n
```text

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      ¬øTe suena familiar?                     ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  ‚ùå "Perd√≠ 3 horas buscando ese informe"                     ‚îÇ
‚îÇ  ‚ùå "El soporte me pregunt√≥ lo mismo 10 veces"               ‚îÇ
‚îÇ  ‚ùå "ChatGPT me dio una respuesta inventada"                 ‚îÇ
‚îÇ  ‚ùå "Tenemos conocimiento, pero nadie lo encuentra"          ‚îÇ
‚îÇ                                                               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                               ‚îÇ
‚îÇ              Anclora resuelve esto en 3 pasos                ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  [1. Sube] ‚Üí [2. Pregunta] ‚Üí [3. Respuesta con fuentes]     ‚îÇ
‚îÇ   Drag PDF      Natural         Citas verificadas           ‚îÇ
‚îÇ   DOCX, MD      language         Sin inventos                ‚îÇ
‚îÇ                                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```text

### 4.3 Propuesta de Valor (3 Pilares Realistas del MVP)
```text

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   ‚è±Ô∏è AHORRA  ‚îÇ  ‚úÖ CONF√çA   ‚îÇ  üîí PRIVADO  ‚îÇ
‚îÇ   TIEMPO     ‚îÇ   100%       ‚îÇ   TOTAL      ‚îÇ
‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
‚îÇ 10+ horas    ‚îÇ Sin          ‚îÇ Tus datos    ‚îÇ
‚îÇ semanales    ‚îÇ alucinaciones‚îÇ nunca salen  ‚îÇ
‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
‚îÇ Query <3seg  ‚îÇ Cada         ‚îÇ Self-hosting ‚îÇ
‚îÇ vs b√∫squeda  ‚îÇ respuesta    ‚îÇ disponible   ‚îÇ
‚îÇ manual       ‚îÇ con citas    ‚îÇ              ‚îÇ
‚îÇ 15-30 min    ‚îÇ exactas      ‚îÇ No depende   ‚îÇ
‚îÇ              ‚îÇ              ‚îÇ de Google    ‚îÇ
‚îÇ              ‚îÇ Similarity   ‚îÇ              ‚îÇ
‚îÇ M√©trica REAL ‚îÇ scores +     ‚îÇ Diferenciador‚îÇ
‚îÇ              ‚îÇ metadata     ‚îÇ clave        ‚îÇ
‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
‚îÇ [üìß CTA]     ‚îÇ [üìß CTA]     ‚îÇ [üìß CTA]     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

NOTA: Enfatizar features REALES del MVP vs aspiracionales
- ‚úÖ Citas verificables (resuelve problema #1 de NotebookLM)
- ‚úÖ Multilenguaje ES/EN
- ‚úÖ Sin l√≠mites artificiales (no como NotebookLM 500k palabras)
NO mencionar: colaboraci√≥n tiempo real, multimodal, Graph RAG
```text

### 4.4 Casos de Uso
```text

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üéß SOPORTE     ‚îÇ ‚öñÔ∏è LEGAL       ‚îÇ
‚îÇ Respuestas     ‚îÇ B√∫squeda en    ‚îÇ
‚îÇ instant√°neas   ‚îÇ contratos y    ‚îÇ
‚îÇ de manuales    ‚îÇ regulaciones   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üöÄ ONBOARDING  ‚îÇ üîß T√âCNICO     ‚îÇ
‚îÇ Nuevo personal ‚îÇ Documentaci√≥n  ‚îÇ
‚îÇ accede a       ‚îÇ siempre        ‚îÇ
‚îÇ conocimiento   ‚îÇ al d√≠a         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```text

### 4.5 FAQ (Accordion)
```text

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Preguntas Frecuentes                                        ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  ‚ñº ¬øEs seguro subir documentos sensibles?                   ‚îÇ
‚îÇ     S√≠. Tus documentos se procesan de forma privada...      ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  ‚ñ∂ ¬øCu√°ntos documentos puedo ingestar?                      ‚îÇ
‚îÇ  ‚ñ∂ ¬øFunciona en espa√±ol?                                    ‚îÇ
‚îÇ  ‚ñ∂ ¬øNecesito conocimientos t√©cnicos?                        ‚îÇ
‚îÇ  ‚ñ∂ ¬øQu√© formatos soporta?                                   ‚îÇ
‚îÇ  ‚ñ∂ ¬øPuedo invitar a mi equipo?                              ‚îÇ
‚îÇ  ‚ñ∂ ¬øCu√°nto cuesta despu√©s de beta?                          ‚îÇ
‚îÇ  ‚ñ∂ ¬øPuedo exportar mis datos?                               ‚îÇ
‚îÇ  ‚ñ∂ ¬øC√≥mo garantizan que no hay alucinaciones?               ‚îÇ
‚îÇ  ‚ñ∂ ¬øQu√© pasa con mis datos al final de la beta?             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```text

---

## 5. UX Flows

### 5.1 Flow: Waitlist ‚Üí Invitaci√≥n ‚Üí Onboarding
```text

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. Usuario visita landing                                    ‚îÇ
‚îÇ    ‚îî‚îÄ> Lee propuesta de valor                                ‚îÇ
‚îÇ    ‚îî‚îÄ> Ve video demo                                         ‚îÇ
‚îÇ    ‚îî‚îÄ> Completa formulario email                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 2. Backend procesa                                           ‚îÇ
‚îÇ    ‚îî‚îÄ> Valida email (formato, no duplicado)                 ‚îÇ
‚îÇ    ‚îî‚îÄ> Inserta en tabla waitlist                            ‚îÇ
‚îÇ    ‚îî‚îÄ> Env√≠a email confirmaci√≥n                             ‚îÇ
‚îÇ    ‚îî‚îÄ> Redirect a /thank-you                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 3. Usuario recibe email de confirmaci√≥n                     ‚îÇ
‚îÇ    "¬°Gracias! Est√°s en lista de espera."                    ‚îÇ
‚îÇ    "Te notificaremos cuando tengamos un lugar."              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚Üì (d√≠as despu√©s)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 4. Admin invita usuario (manual o autom√°tico)               ‚îÇ
‚îÇ    ‚îî‚îÄ> Backend marca invited = TRUE                         ‚îÇ
‚îÇ    ‚îî‚îÄ> Env√≠a email invitaci√≥n con link registro             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 5. Usuario accede a app.anclora.app/register                ‚îÇ
‚îÇ    ‚îî‚îÄ> Completa formulario (email prefill, password)        ‚îÇ
‚îÇ    ‚îî‚îÄ> Backend crea usuario, retorna JWT                    ‚îÇ
‚îÇ    ‚îî‚îÄ> Frontend guarda token, redirect a /dashboard         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 6. Onboarding Wizard se muestra (si no completado)          ‚îÇ
‚îÇ    Paso 1: "Sube tu primer documento"                       ‚îÇ
‚îÇ    ‚îî‚îÄ> Drag & drop o file picker                            ‚îÇ
‚îÇ    ‚îî‚îÄ> Ingesta as√≠ncrona con progress bar                   ‚îÇ
‚îÇ    Paso 2: "Haz tu primera pregunta"                        ‚îÇ
‚îÇ    ‚îî‚îÄ> Input con placeholder                                ‚îÇ
‚îÇ    ‚îî‚îÄ> Muestra respuesta con citas                          ‚îÇ
‚îÇ    Paso 3: "Explora caracter√≠sticas"                        ‚îÇ
‚îÇ    ‚îî‚îÄ> Tour r√°pido con tooltips                             ‚îÇ
‚îÇ    ‚îî‚îÄ> Marcar onboarding_completed = TRUE                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 7. Usuario activo                                            ‚îÇ
‚îÇ    ‚îî‚îÄ> Dashboard con chat y docs                            ‚îÇ
‚îÇ    ‚îî‚îÄ> Puede subir m√°s documentos (hasta l√≠mite)            ‚îÇ
‚îÇ    ‚îî‚îÄ> Hacer queries ilimitadas (con rate limit)            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```text

### 5.2 Flow: Ingesta As√≠ncrona
```text

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. Usuario sube archivo                                      ‚îÇ
‚îÇ    Frontend: UploadZone.tsx                                  ‚îÇ
‚îÇ    ‚îî‚îÄ> Validaciones: tipo, tama√±o, l√≠mites                  ‚îÇ
‚îÇ    ‚îî‚îÄ> POST /ingest con FormData                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 2. Backend encola job                                        ‚îÇ
‚îÇ    Backend: routes/ingest.py                                 ‚îÇ
‚îÇ    ‚îî‚îÄ> Validar autenticaci√≥n                                ‚îÇ
‚îÇ    ‚îî‚îÄ> Verificar l√≠mites (max 50 docs)                      ‚îÇ
‚îÇ    ‚îî‚îÄ> Crear job en Redis Queue                             ‚îÇ
‚îÇ    ‚îî‚îÄ> Retornar {job_id, status: "pending"}                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 3. Frontend inicia polling                                   ‚îÇ
‚îÇ    GET /ingest/status/{job_id} cada 2 segundos              ‚îÇ
‚îÇ    ‚îî‚îÄ> Muestra progress bar animada                         ‚îÇ
‚îÇ    ‚îî‚îÄ> Mensaje: "Procesando documento..."                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 4. Worker procesa job                                        ‚îÇ
‚îÇ    Worker: workers/ingest_worker.py                          ‚îÇ
‚îÇ    ‚îî‚îÄ> Parse documento (PDF/DOCX/TXT/MD)                    ‚îÇ
‚îÇ    ‚îî‚îÄ> Chunking (512 tokens, 80 overlap)                    ‚îÇ
‚îÇ    ‚îî‚îÄ> Generar embeddings (nomic-embed)                     ‚îÇ
‚îÇ    ‚îî‚îÄ> Insertar en Qdrant                                   ‚îÇ
‚îÇ    ‚îî‚îÄ> Guardar metadata en Postgres                         ‚îÇ
‚îÇ    ‚îî‚îÄ> Actualizar job status: "completed"                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 5. Frontend detecta completed                                ‚îÇ
‚îÇ    ‚îî‚îÄ> Detener polling                                       ‚îÇ
‚îÇ    ‚îî‚îÄ> Toast: "‚úÖ Documento procesado"                      ‚îÇ
‚îÇ    ‚îî‚îÄ> Actualizar lista de documentos                       ‚îÇ
‚îÇ    ‚îî‚îÄ> Track evento: document_uploaded                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```text

---

## 6. Performance & Optimizaci√≥n

### 6.1 Cache Strategy

#### VectorStoreIndex Cache

```python
# apps/api/rag/pipeline.py
from cachetools import TTLCache
from datetime import timedelta

# Cache global de √≠ndices (TTL 1 hora)
_index_cache = TTLCache(maxsize=100, ttl=3600)

def get_vector_index(user_id: str, force_refresh: bool = False):
    """Obtener √≠ndice vectorial cacheado."""
    cache_key = f"index:{user_id}"

    if not force_refresh and cache_key in _index_cache:
        logger.info(f"Cache HIT for user {user_id}")
        return _index_cache[cache_key]

    logger.info(f"Cache MISS for user {user_id}, creating index...")
    index = VectorStoreIndex.from_vector_store(
        vector_store=get_qdrant_client(),
        embed_model=EMBED_MODEL
    )
    _index_cache[cache_key] = index
    return index
```python

#### LLM Client Singleton

```python
# apps/api/clients/llm_client.py
from functools import lru_cache
from llama_index.llms.gemini import Gemini

@lru_cache(maxsize=1)
def get_gemini_client():
    """Singleton LLM client."""
    return Gemini(
        api_key=os.getenv("GEMINI_API_KEY"),
        model=os.getenv("GEMINI_MODEL", "models/gemini-2.0-flash")
    )
```python

### 6.2 Rate Limiting

```python
# apps/api/middleware.py
from slowapi import Limiter, _rate_limit_exceeded_handler
from slowapi.util import get_remote_address

limiter = Limiter(key_func=get_remote_address)

# Aplicar a rutas espec√≠ficas
@router.post("/api/waitlist")
@limiter.limit("5/minute")
async def add_to_waitlist(request: Request, ...):
    ...

@router.post("/query")
@limiter.limit("50/hour")
async def query_documents(request: Request, current_user: User, ...):
    ...
```python

### 6.3 Database Connection Pooling

```python
# apps/api/database/postgres_client.py
from sqlalchemy import create_engine
from sqlalchemy.pool import QueuePool

engine = create_engine(
    DATABASE_URL,
    poolclass=QueuePool,
    pool_size=10,          # Conexiones persistentes
    max_overflow=20,       # Conexiones adicionales bajo carga
    pool_timeout=30,
    pool_recycle=3600      # Reciclar conexiones cada hora
)
```python

---

## 7. Monitoring & Observability

### 7.1 M√©tricas Clave (Google Analytics 4)

#### Landing Page Events

```typescript
// apps/landing/lib/analytics.ts
export const trackEvent = (eventName: string, params?: Record<string, any>) => {
  if (typeof window !== 'undefined' && window.gtag) {
    window.gtag('event', eventName, params);
  }
};

// Eventos cr√≠ticos
trackEvent('cta_click', { location: 'hero', cta_text: 'Solicitar Acceso' });
trackEvent('email_submit', { referral_source: 'linkedin' });
trackEvent('video_play', { video_id: 'demo' });
trackEvent('faq_expand', { question_id: 'seguridad' });
```typescript

#### App Events

```python
# apps/api/services/analytics.py
async def track_event(
    user_id: str,
    event_type: str,
    metadata: Dict[str, Any]
):
    """Track analytics event."""
    event = AnalyticsEvent(
        user_id=user_id,
        event_type=event_type,
        metadata=metadata,
        created_at=datetime.utcnow()
    )
    db.add(event)
    await db.commit()

    # Tambi√©n enviar a GA4 server-side (opcional)
    # await send_to_ga4(event_type, metadata)
```python

### 7.2 Dashboards

#### Admin Dashboard (apps/web/app/admin/page.tsx)

```typescript
interface AdminMetrics {
  // Waitlist
  waitlist_total: number;
  waitlist_invited: number;
  waitlist_pending: number;

  // Users
  users_total: number;
  users_active_7d: number;
  users_onboarding_completed: number;

  // Documents
  documents_total: number;
  documents_uploaded_today: number;

  // Queries
  queries_total: number;
  queries_today: number;
  queries_per_user_avg: number;

  // Errors
  errors_24h: number;
  error_rate: number;  // %

  // Performance
  query_latency_p50: number;  // ms
  query_latency_p95: number;  // ms
}
```typescript

---

## 8. Security Considerations

### 8.1 Authentication & Authorization

- **JWT Secret:** 256-bit random key, almacenado en env vars, nunca en c√≥digo
- **Password Hashing:** bcrypt con cost factor 12
- **Token Expiration:** 24h para access token (beta), 7 d√≠as para refresh (post-beta)
- **HTTPS Only:** Todos los cookies y tokens solo via HTTPS
- **CORS:** Whitelist espec√≠fica para dominios permitidos

### 8.2 Input Validation

- **Email:** Regex + normalizaci√≥n (lowercase, trim)
- **Passwords:** Min 8 caracteres, al menos 1 n√∫mero, 1 letra
- **File Upload:** Validar MIME type, extensi√≥n, tama√±o (<10 MB), content hash
- **SQL Injection:** Usar SQLAlchemy ORM, nunca raw queries
- **XSS:** Sanitizar output en frontend, Content-Security-Policy headers

### 8.3 Rate Limiting

| Endpoint | Limit | Raz√≥n |
|----------|-------|-------|
| `/api/waitlist` | 5 req/min por IP | Anti-spam |
| `/auth/login` | 10 req/min por IP | Anti-brute force |
| `/auth/register` | 5 req/min por IP | Anti-bots |
| `/ingest` | 10 req/hora por usuario | Proteger recursos |
| `/query` | 50 req/hora por usuario | Fair use beta |

---

## 9. Testing Strategy

### 9.1 Unit Tests (Backend)

```python
# apps/api/tests/test_waitlist.py
import pytest

@pytest.mark.asyncio
async def test_add_to_waitlist_valid_email():
    response = await client.post("/api/waitlist", json={
        "email": "test@example.com",
        "referral_source": "linkedin"
    })
    assert response.status_code == 201
    assert response.json()["success"] is True

@pytest.mark.asyncio
async def test_add_to_waitlist_duplicate_email():
    # First request
    await client.post("/api/waitlist", json={"email": "test@example.com"})
    # Duplicate request
    response = await client.post("/api/waitlist", json={"email": "test@example.com"})
    assert response.status_code == 409
    assert "already registered" in response.json()["error"]

@pytest.mark.asyncio
async def test_rate_limiting():
    # Enviar 6 requests r√°pidamente
    for _ in range(6):
        response = await client.post("/api/waitlist", json={"email": f"test{_}@example.com"})
    assert response.status_code == 429
```python

### 9.2 Integration Tests

```python
# apps/api/tests/test_user_journey.py
@pytest.mark.asyncio
async def test_full_user_journey():
    # 1. Registrar usuario
    register_response = await client.post("/auth/register", json={
        "email": "journey@test.com",
        "password": "SecurePass123"
    })
    assert register_response.status_code == 201
    token = register_response.json()["access_token"]

    # 2. Login
    login_response = await client.post("/auth/login", json={
        "email": "journey@test.com",
        "password": "SecurePass123"
    })
    assert login_response.status_code == 200

    # 3. Subir documento
    files = {"file": ("test.txt", b"Test content", "text/plain")}
    headers = {"Authorization": f"Bearer {token}"}
    ingest_response = await client.post("/ingest", files=files, headers=headers)
    assert ingest_response.status_code == 202
    job_id = ingest_response.json()["job_id"]

    # 4. Polling status (simplificado)
    status_response = await client.get(f"/ingest/status/{job_id}", headers=headers)
    assert status_response.status_code == 200

    # 5. Query documento
    query_response = await client.post("/query", json={
        "question": "What is the content?"
    }, headers=headers)
    assert query_response.status_code == 200
    assert "answer" in query_response.json()
```python

### 9.3 E2E Tests (Frontend con Playwright - Opcional Fase 3)

```typescript
// apps/web/tests/landing.spec.ts
import { test, expect } from '@playwright/test';

test('landing page email capture flow', async ({ page }) => {
  await page.goto('/');

  // Verificar hero visible
  await expect(page.locator('h1')).toContainText('Deja de buscar');

  // Completar formulario
  await page.fill('input[type="email"]', 'test@example.com');
  await page.click('button:has-text("Solicitar Acceso")');

  // Verificar redirecci√≥n a thank-you
  await expect(page).toHaveURL('/thank-you');
  await expect(page.locator('h1')).toContainText('Gracias');
});
```typescript

---

## 10. Deployment Architecture

### 10.1 Fase Beta: Railway (Recomendado)

```yaml
# railway.toml
[build]
  builder = "DOCKERFILE"
  dockerfilePath = "infra/docker/Dockerfile.api"

[deploy]
  startCommand = "uvicorn main:app --host 0.0.0.0 --port $PORT"
  healthcheckPath = "/health"
  healthcheckTimeout = 30
  restartPolicyType = "ON_FAILURE"
  restartPolicyMaxRetries = 3

# Servicios
services:
  - api (FastAPI)
  - web (Next.js)
  - postgres (managed)
  - redis (managed)
  - qdrant (external: Qdrant Cloud Starter $0/mes)
```yaml

#### Costes Estimados (Railway)

- API + Web + Worker: $5-10/mes (Hobby plan)
- Postgres: Incluido
- Redis: Incluido
- Qdrant Cloud: $0-25/mes (starter)
- **Total: $5-35/mes**

### 10.2 Alternativa: Fly.io

```toml
# fly.toml
app = "anclora-api"

[build]
  dockerfile = "infra/docker/Dockerfile.api"

[[services]]
  http_checks = []
  internal_port = 8000
  protocol = "tcp"

  [[services.ports]]
    handlers = ["http"]
    port = 80

  [[services.ports]]
    handlers = ["tls", "http"]
    port = 443
```toml

---

## 11. Rollout Plan

### 11.1 Invite Waves

| Ola | D√≠a | Usuarios | Criterio | Objetivo |
|-----|-----|----------|----------|----------|
| **1** | 1 | 10 | Friends & Family | Validar bugs cr√≠ticos |
| **2** | 3 | 20 | Network cercano | Feedback detallado |
| **3** | 7 | 30 | Early waitlist | Tracci√≥n inicial |
| **4** | 14 | 50 | Resto waitlist | Escalar uso |

### 11.2 Criterios para Siguiente Ola

- ‚úÖ Error rate <5% en ola anterior
- ‚úÖ No bugs P0/P1 sin resolver
- ‚úÖ Feedback survey completado por >50% usuarios
- ‚úÖ Performance estable (P95 <5seg)

---

## 12. Decisiones Finales

### ‚úÖ Decisiones APROBADAS

| ID | Decisi√≥n | Elecci√≥n Final | Justificaci√≥n |
|----|----------|----------------|---------------|
| **D1** | Arquitectura landing | ‚úÖ **Separada (Vercel)** | Mejor performance, SEO, y flexibilidad marketing |
| **D2** | Dominio | ‚úÖ **anclora.com** | Dominio existente, profesional |
| **D3** | Email service | ‚úÖ **Hostinger SMTP** | Ya contratado, coste $0, dominio propio |

### ‚ùì Decisiones PENDIENTES

| ID | Decisi√≥n | Opciones | Recomendaci√≥n | Impacto |
|----|----------|----------|---------------|---------|
| **D4** | Invite strategy | Autom√°tico / Manual approval | Manual (admin dashboard) | Bloquea T067 |
| **D5** | Product Hunt | D√≠a 1 / Esperar tracci√≥n | Esperar (d√≠a 7) | No bloqueante |
| **D6** | A/B testing tool | Vercel / Google Optimize / Manual | Vercel Analytics | No bloqueante |

### üìã Configuraci√≥n de Infraestructura Confirmada

**Dominios:**
- Landing: `www.anclora.com` o `anclora.com` ‚Üí Vercel
- App Beta: `app.anclora.com` ‚Üí Railway/Fly.io

**Email (Hostinger SMTP):**
- Server: `smtp.hostinger.com:465` (SSL)
- Accounts/Aliases a crear:
  - `noreply@anclora.com` - Emails autom√°ticos
  - `soporte@anclora.com` - Support tickets (ya existe como `hola@`)
  - `beta@anclora.com` - Invitaciones (opcional)

**Costes Mensuales Estimados:**
- Landing (Vercel): $0 (free tier)
- Email (Hostinger): $0 (ya incluido)
- App Beta (Railway): $5-20/mes
- Qdrant Cloud: $0-25/mes
- **Total: $5-45/mes** (vs $15-50 original, ahorro de $10-30/mes)

---

**Documento creado:** 2025-10-20
**Estado:** üü° Pendiente de decisiones (D1-D4)
**Pr√≥ximo paso:** Aprobar decisiones cr√≠ticas y comenzar Fase 0
